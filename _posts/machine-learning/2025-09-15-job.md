---
layout: post
title: 面试
---

* 得物一:
    * 线上线下不一致（指的是指标不一致，离线涨线下不涨）：
        * 训练时候：指标根本没有对齐线上，例如离线指标看的auc，实际上GAUC涨了才有收益；训练目标也和线上不一致，线上评估一个月的，线下转化标签只有24h的。长期转化看不到；训练标签就有问题，关联上或者标签是有问题的等的。
        * ab阶段：流量分配不均匀，aa就有问题；其他ab实验叠加导致有问题。
        * 推理阶段：
            1. 评估样本不一样，例如离线只评估曝光样本，线上可能会评估其他样本，导致其他样本曝光，以及数据采样策略的问题 离线训练样本的分布和线上不一样，线上可能新用户占比比较高
            1. 特征不一样：训练时候能拿到线上拿不到的标签和特征；工程漏填错填特征了
            1. 模型不一样：线上加载的模型有问题，Embedding没有加载上；dropout等设置有问题；batchnorm没有加载上
            1. 下游问题：q打分分布不一样了，导致后续重排逻辑出问题了
            1. 其他线上问题：耗时涨了很多，导致收益没了。

    * dead relu的原因并且如何恢复？如何避免？
        * 成因：
          * 学习率太高，一次更新就将b/w推的太负了
          * 初始化有问题：
            * relu会将方差减半，导致到后面方差越来越小，会被b主导
            * 方差过大：会导致输出过大，后续梯度很大，直接使b一下更新到很负的负数
            * 解决：初始化需要将var乘以2
          * 不小心对b也进行了权重衰减。以及b为0初始化
            * 解决：初始化大一点
          * 输入偏移了，导致在负半区
          * 深网络导致最后能是上游更新的通路很少了，每次有一半都没法更新的；并且会使层间的输出偏移，之后变得更快负。
            * resnet并且batchnorm
          * 并且类别不均衡
        * 拯救：
          * 立马降低学习率
          * 立马换损失函数
          * 重新初始化
          * 输入分布换一下
* 连尚
  * 多语言特征在特征空间如何对齐：
    * 共享id
    * star：partition norm 以及 星型 参数
* shein:
  * 延迟转化建模
    * 首先是预估分布
  * 最新的推荐系统的方向：
    * 长序列建模;https://zhuanlan.zhihu.com/p/699924066
      * sim gsu/esu
        * esu: 时间间隔embedding 拼接 item embedding  然后 w 后点乘 item embeding 过w 。softmax  attention
      * eta：
        * 希望 gsu 和esu 合并，实际上用simhash 减少时间复杂度
      * sdim：
        * 所有行为序列都输入：哈希碰撞近似相似度 
      * twin：
        * 拆分静态特征和交叉特征，提前计算好，然后交叉特征不和query交互，但是value会交互
      * twin v2：
        * token 聚类
      * long：
        * token merge
    * 大模型如何融合
  * 召回如何做样本
  * 召回如何debias
  * 重排模型
    * mmr：贪心，一个一个挑相似度低的
    * dpp：贪心，计算行列式，也就是几个向量围成的面积最大。
  * 有什么多模态的模型
* shopee
  * 大模型/多模态如何输入到模型当中
    * 层次聚类
    * rq-kmeans
    * 打标
    * 
  * 长序列怎么做/介绍一下sim其他长序列的方法
  * simhash怎么做
* 召回怎么做样本【Embedding-based Retrieval in Facebook Search】：
  * 召回的中部和尾部可以做负样本
  * 同类目下可以随机采样 作为hard负样本
  * 聚类后，同一类目下做负采样
  * 精排 101-500 的做hard neg
  * 曝光样本作为正样本的效果和点击做正样本效果是一样的，曝光未点击不能做负样本。
  * easy 到hard 100 ：1
  * 可以做hard positive mining 
* 多场景建模：
  * star 和大模型微调一样的，但是star是乘一个新的矩阵
* 多目标怎么做
* transformer结构
* self attention 改进
  * 多头注意力
  * 
* 怎么从零搭建推荐系统
* 加了点赞目标后留存掉了如何分析
* 各种结构都加过之后如何继续提升精排效果。
* debias 如何做。
  * 最好的debias的方式


